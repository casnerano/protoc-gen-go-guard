// Code generated by protoc-gen-go-rbac. DO NOT EDIT.
// versions:
// - protoc-gen-go-grpc {{ .Meta.ModuleVersion }}
// - protoc             {{ .Meta.ProtocVersion }}
// source: {{ .File.Source }}

package {{ .File.Package }}

import (
    "github.com/casnerano/protoc-gen-go-rbac/pkg/rbac"
)

{{- range .Services }}
    var rbacService_{{ .Name }} = rbac.Service{
        Name: "{{ .Name }}",
        {{- if .Rules }}
            Rules: &rbac.Rules{
                {{- if .Rules.AllowPublic }}
                    AllowPublic: rbac.Ptr({{ .Rules.AllowPublic }}),
                {{- end }}
                {{- if .Rules.RequireAuthn }}
                    RequireAuthn: rbac.Ptr({{ .Rules.RequireAuthn }}),
                {{- end }}
                {{- if .Rules.RoleBased }}
                    RoleBased: &rbac.RoleBased{
                        {{- if .Rules.RoleBased.AllowedRoles }}
                            AllowedRoles: []string{
                                {{- range $i, $role := .Rules.RoleBased.AllowedRoles }}
                                    "{{ $role | toLower }}",
                                {{- end }}
                            },
                            {{- if .Rules.RoleBased.Requirement }}
                                Requirement: rbac.Requirement({{ .Rules.RoleBased.Requirement }}),
                            {{- end }}
                        {{- end }}
                    },
                {{- end }}
                {{- if .Rules.PolicyBased }}
                    PolicyBased: &rbac.PolicyBased{
                        {{- if .Rules.PolicyBased.PolicyNames }}
                            PolicyNames: []string{
                                {{- range $i, $policy := .Rules.PolicyBased.PolicyNames }}
                                    "{{ $policy }}",
                                {{- end }}
                            },
                            {{- if .Rules.PolicyBased.Requirement }}
                                Requirement: rbac.Requirement({{ .Rules.PolicyBased.Requirement }}),
                            {{- end }}
                        {{- end }}
                    },
                {{- end }}
            },
        {{- end }}
        Methods: map[string]*rbac.Method{
            {{- range $name, $method := .Methods }}
            "{{ $name }}": {
                Rules: &rbac.Rules{
                    {{- if $method.Rules.AllowPublic }}
                        AllowPublic: rbac.Ptr({{ $method.Rules.AllowPublic }}),
                    {{- end }}
                    {{- if $method.Rules.RequireAuthn }}
                        RequireAuthn: rbac.Ptr({{ $method.Rules.RequireAuthn }}),
                    {{- end }}
                    {{- if $method.Rules.RoleBased }}
                        RoleBased: &rbac.RoleBased{
                            {{- if $method.Rules.RoleBased.AllowedRoles }}
                                AllowedRoles: []string{
                                    {{- range $j, $role := $method.Rules.RoleBased.AllowedRoles }}
                                        "{{ $role | toLower }}",
                                    {{- end }}
                                },
                                {{- if $method.Rules.RoleBased.Requirement }}
                                    Requirement: rbac.Requirement({{ $method.Rules.RoleBased.Requirement }}),
                                {{- end }}
                            {{- end }}
                        },
                    {{- end }}
                    {{- if $method.Rules.PolicyBased }}
                        PolicyBased: &rbac.PolicyBased{
                            {{- if $method.Rules.PolicyBased.PolicyNames }}
                                PolicyNames: []string{
                                    {{- range $k, $policy := $method.Rules.PolicyBased.PolicyNames }}
                                        "{{ $policy }}",
                                    {{- end }}
                                },
                                {{- if $method.Rules.PolicyBased.Requirement }}
                                    Requirement: rbac.Requirement({{ $method.Rules.PolicyBased.Requirement }}),
                                {{- end }}
                            {{- end }}
                        },
                    {{- end }}
                },
            },
            {{- end }}
        },
    }

    func (Unimplemented{{ .Name }}Server) GetRBACService() *rbac.Service {
        return &rbacService_{{ .Name }}
    }
{{- end }}

